<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="description"><meta name="viewport" content="width=device-width, initial-scale=1"><title>ubuntu搭建vnc服务 · Duolaa</title><link rel="short icon" href="/favicon.ico"><!-- font--><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Source+Sans+Pro:400,600|Roboto Mono"><!-- icon--><link rel="stylesheet" href="/fonts/iconfont/iconfont.css"><!-- theme style--><link rel="stylesheet" href="/css/style.css"></head><body><div id="main"><header><a href="/." class="logo">Duolaa</a><ul class="nav"><li class="nav-link"><a href="/" target="_self">首页</a></li><li class="nav-link"><a href="/archives/" target="_self">归档</a></li><li class="nav-link"><a href="/tags/" target="_self">标签</a></li><li class="nav-link"><a href="/about/" target="_self">关于</a></li></ul></header><section id="container"><article class="post"><h1 class="post-title">ubuntu搭建vnc服务</h1><span class="post-time">Jul 16, 2016</span><div class="post-content"><h3 id="本文实践环境信息"><a href="#本文实践环境信息" class="headerlink" title="本文实践环境信息"></a>本文实践环境信息</h3><p>服务器Ubuntu相关信息：<br><img src="http://i.imgur.com/amICGLu.png" alt=""></p>
<h3 id="安装vncserver服务"><a href="#安装vncserver服务" class="headerlink" title="安装vncserver服务"></a>安装vncserver服务</h3><pre><code>sudo apt-get install vnc4server
</code></pre><p><img src="http://i.imgur.com/gjOIQRz.png" alt=""></p>
<a id="more"></a>
<h3 id="开启vnc服务"><a href="#开启vnc服务" class="headerlink" title="开启vnc服务"></a>开启vnc服务</h3><p>安装成功后，开启vnc服务。如果想访问root用户的桌面环境就用sudo vncserver，如果访问当前普通用户的环境就直接vncserver即可，首次启动会要求设置密码，用来在客户端访问时使用，后面可以使用vncpasswd 修改。<br><img src="http://i.imgur.com/2BPjWBH.png" alt=""></p>
<p>启动vnc成功后，会在主目录下产生一个.vnc目录。</p>
<h3 id="关闭服务"><a href="#关闭服务" class="headerlink" title="关闭服务"></a>关闭服务</h3><pre><code>vncserver -kill  :1
Killing Xvnc4 process ID 5335
</code></pre><p>PS:注意这里-kill之后需要加空格，不然不仅没有能够成功关闭端口1的vncserver，反而又启动了一个新的vncserver端口</p>
<h3 id="查看进程"><a href="#查看进程" class="headerlink" title="查看进程"></a>查看进程</h3><p><img src="http://i.imgur.com/WyNn77N.png" alt=""></p>
<h3 id="远程连接服务器"><a href="#远程连接服务器" class="headerlink" title="远程连接服务器"></a>远程连接服务器</h3><p>客户端采用VNC Viewer进行远程连接。（官方下载地址：<a href="http://www.realvnc.com/download/viewer/）" target="_blank" rel="external">http://www.realvnc.com/download/viewer/）</a></p>
<p><img src="http://i.imgur.com/GGFRYnW.png" alt=""></p>
<p>注意红框标注的服务器地址信息填写。之后点击确定，注入之前设置的密码。</p>
<p><img src="http://i.imgur.com/wz4lNbq.png" alt=""></p>
<p>首次连接之后，一般会出现下面的截图所示的页面，只能看到terminal，看不到桌面与菜单。原因是VNC默认是不启动桌面环境的。</p>
<p><img src="http://i.imgur.com/jj72xOv.png" alt=""></p>
<h3 id="修改配置"><a href="#修改配置" class="headerlink" title="修改配置"></a>修改配置</h3><p>vnc server启动时，会调用“~/.vnc/xstartup”进行初始化，我们的任务就是在这里启动桌面环境。ubuntu支持两种桌面环境：unity与gnome，（unity是对gnome的一种深度定制）还可以选择安装一种轻量级桌面环境，xfce4。<br>默认的xstartup文件在/home/duolaa/.vnc目录下面，内容如图所示。<br><img src="http://i.imgur.com/SFeusW3.png" alt=""></p>
<p>这里贴一下我的设置截图,vi xstartup进行修改</p>
<p><img src="http://i.imgur.com/i6PNGFv.png" alt=""><br>最后看到的远程桌面如图所示，这里可以看到桌面了，但是略显不爽：<br><img src="http://i.imgur.com/DVWK7rh.png" alt=""></p>
<h3 id="参考地址"><a href="#参考地址" class="headerlink" title="参考地址"></a>参考地址</h3><p><a href="http://blog.chinaunix.net/uid-20528014-id-4714397.html" target="_blank" rel="external">http://blog.chinaunix.net/uid-20528014-id-4714397.html</a> </p>
</div></article><div class="tags"><a href="/tags/Vnc/">Vnc</a></div><div class="paginator"><a href="/2016/07/16/二次加密的思考/" class="prev"><i class="iconfont icon-left"></i><span> 上一页</span></a><a href="/2016/07/16/hello-world/" class="next"><span>下一页</span><i class="iconfont icon-right"></i></a></div><section id="comments"><div data-thread-key="http://duolaa.xyz/2016/07/16/ubuntu搭建vnc服务/index.html" data-title="ubuntu搭建vnc服务" data-url="http://duolaa.xyz/2016/07/16/ubuntu搭建vnc服务/index.html" class="ds-thread"></div><script type="text/javascript">var duoshuoQuery = {short_name: "duolaa" };
(function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ds);
})();</script></section></section><footer><div class="copyright"><p>&copy;2015-2016<span class="heart"><i class="iconfont icon-heart"></i></span><span class="author">Dunn</span><span class="heart"><i class="iconfont icon-heart"></i> Theme by </span><a href="https://github.com/ahonn/hexo-theme-even">   Even</a></p></div><label id="back2top"><i class="iconfont icon-up"></i></label></footer></div></body><script src="/js/back2top.js"></script></html>